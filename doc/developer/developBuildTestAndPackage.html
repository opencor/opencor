<!DOCTYPE html>
<html>
    <head>
        <title>
            Develop, build, test and package
        </title>

        <meta http-equiv="content-type" content="text/html; charset=iso-8859-1" />

        <link href="../res/stylesheet.css" rel="stylesheet" type="text/css" />
        <link href="../res/developerStylesheet.css" rel="stylesheet" type="text/css" />
    </head>
    <body>
        <h1>
            Develop, build, test and package
        </h1>

        <p>
            OpenCOR is developed, built, tested and packaged on <a href="http://www.microsoft.com/windows/windows-7/">Windows 7</a>, <a href="http://www.ubuntu.com/">Ubuntu</a> 11.04 (Natty Narwhal; both the 32-bit and 64-bit versions) and <a href="http://www.apple.com/macosx/">Mac OS X</a> 10.6 (Snow Leopard). The information which follows assumes that you are using one of these operating systems.
        </p>

        <h2>
            Pre-Requirements
        </h2>

        <p>
            The following tools are required in order to develop, build, test and/or package OpenCOR:
        </p>

        <ul>
            <li>
                <a href="http://git-scm.com/">Git</a> (the <a href="http://packages.ubuntu.com/natty/git">git</a> package on Ubuntu): a distributed version control system. You can get a copy of OpenCOR's source code by cloning our <A HREF ="https://github.com/opencor/opencor">Git repository</a> either in <em>read-only</em> mode:
                <pre>$ git clone git://github.com/opencor/opencor.git</pre>
                or in <em>read-write</em> mode:
                <pre>$ git clone git@github.com:opencor/opencor.git</pre>
                <div>
                    <strong>Note:</strong> you might want to check the GitHub help on setting up Git on <a href="http://help.github.com/win-set-up-git/">Windows</a>, <a href="http://help.github.com/linux-set-up-git/">Linux</a> and <a href="http://help.github.com/mac-set-up-git/">Mac OS X</a>, respectively.
                </div>
            </li>
            <li><a href="http://www.cmake.org/">CMake</a> 2.8+ (the <a href="http://packages.ubuntu.com/natty/cmake">cmake</a> package on Ubuntu): a cross-platform build system;</li>
            <li>
                C++ toolchain: a set of C++ tools. The toolchain is different depending on the platform you are using:
                <ul>
                    <li>Windows: MinGW 4.4 which gets installed as part of <a href="http://qt.nokia.com/">Qt</a> SDK 1.1 (see below);</li>
                    <li>Linux: the <a href="http://packages.ubuntu.com/natty/g++">g++</a> package on Ubuntu; and</li>
                    <li>Mac OS X: <a href="http://developer.apple.com/xcode/">Xcode</a>.</li>
                </ul>
            </li>
            <li>
                Qt SDK 1.1: a cross-platform application and UI framework (<a href="http://qt.nokia.com/">Qt</a> 4.7.3), and integrated development environment (<a href="http://qt.nokia.com/products/developer-tools">Qt Creator</a> 2.1):
                <ul>
                    <li><a href="http://get.qt.nokia.com/qtsdk/Qt_SDK_Windows_online_v1_1_en.exe">Windows</a>;</li>
                    <li>Linux: <a href="http://get.qt.nokia.com/qtsdk/Qt_SDK_Lin32_online_v1_1_en.run">32-bit</a>/<a href="http://get.qt.nokia.com/qtsdk/Qt_SDK_Lin64_online_v1_1_en.run">64-bit</a>; and</li>
                    <li><a href="http://get.qt.nokia.com/qtsdk/Qt_SDK_Mac64_online_v1_1_en.dmg">Mac OS X</a>.</li>
                </ul>
                <div>
                    <strong>Note #1:</strong> the default type of installation for the Qt SDK is fine, but it installs components that may not be of interest to you. We would therefore recommend selecting the custom type of installation, and then select <code>Qt SDK</code> | <code>Miscellaneous</code> | <code>Qt Sources</code> | <code>Qt 4.7.3 Sources</code> and unselect <code>Qt SDK</code> | <code>APIs</code>, as well as some components under <code>Qt SDK</code> | <code>Documentation</code> (<code>Qt Mobility</code>, <code>Qt Simulator Documentation</code> and <code>Symbian Documentation</code>) and <code>Qt SDK</code> | <code>Development Tools</code> (<code>Maemo Toolchain</code>, <code>Simulator</code>, <code>Symbian Toolchains</code> and <code>Device Files</code>). (Note that depending on the platform on which you are installing the Qt SDK, some of these components may or not be present.)
                </div>
                <div>
                    <strong>Note #2:</strong> though OpenCOR is currently being developed using Qt 4.7.3 and Qt Creator 2.1, it happens that it can also be built using Qt 4.6. For this reason, our various CMakeLists.txt files require Qt 4.6 or above, but this requirement will be revised as soon as Qt 4.6 is shown to break our build.
                </div>
            </li>
            <li><a href="http://nsis.sourceforge.net/">NSIS</a> (Windows only): a program for creating Windows installers.</li>
        </ul>

        <p>
            Finally, you might want/need to update your <code>PATH</code> environment variable by adding the following paths:
        </p>

        <ul>
            <li>Windows: <code>C:\Program Files (x86)\CMake 2.8\bin</code>, <code>C:\QtSDK\mingw\bin</code> and <code>C:\QtSDK\Desktop\Qt\4.7.3\mingw\bin</code>;</li>
            <li>Linux: <code>/opt/QtSDK/Desktop/Qt/473/gcc/bin</code> and <code>/opt/QtSDK/QtCreator/bin</code> in <code>/etc/environment</code>;</li>
            <li>MaC OS X: <code>/Developer/QtSDK/Desktop/Qt/473/gcc/bin</code> in <code>/etc/profile</code>.</li>
        </ul>

        <h2>
            Develop
        </h2>

        <p>
            Except for the <a href="../user/authors.html">authors</a>, OpenCOR is not currently opened for development. This will change as soon as OpenCOR gets officially released.
        </p>

        <h2>
            <a name="buildAndTest" class="sectionAnchor">Build and Test</a>
        </h2>

        <p>
            OpenCOR can be built in two different ways:
        </p>

        <ul>
            <li>
                <strong>Command line:</strong> various batch and VBScript files (<code>.bat</code> and <code>.vbs</code> files) on Windows and shell scripts on Linux / Mac OS X are available:
                <ul>
                    <li><a href="https://github.com/opencor/opencor/blob/master/cleanproj"><code>[OpenCOR]/cleanproj</code></a>[<a href="https://github.com/opencor/opencor/blob/master/cleanproj.bat"><code>.bat</code></a>]: cleans the OpenCOR environment;</li>
                    <li><a href="https://github.com/opencor/opencor/blob/master/cleanprojall"><code>[OpenCOR]/cleanprojall</code></a>[<a href="https://github.com/opencor/opencor/blob/master/cleanprojall.bat"><code>.bat</code></a>]: cleans all of the OpenCOR environment (i.e. including <a href="thirdPartyLibraries.html">third-party libraries</a>);</li>
                    <li>
                        <a href="https://github.com/opencor/opencor/blob/master/makeproj"><code>[OpenCOR]/makeproj</code></a>[<a href="https://github.com/opencor/opencor/blob/master/makeproj.bat"><code>.bat</code></a>]: compiles and links everything that is required to get a release version of OpenCOR; and
                        <div>
                            <strong>Note:</strong> <code>makeproj[.bat]</code> does, by default, compile OpenCOR in parallel. You can, however, specify the number of jobs to be run simultaneously, thus making it possible to compile OpenCOR sequentially, if needed:
                            <pre>$ ./makeproj 1</pre>
                        </div>
                    </li>
                    <li>
                        <a href="https://github.com/opencor/opencor/blob/master/runproj"><code>[OpenCOR]/runproj</code></a>[<a href="https://github.com/opencor/opencor/blob/master/runproj.bat"><code>.bat</code></a> | <a href="https://github.com/opencor/opencor/blob/master/runproj.vbs"><code>.vbs</code></a>]: runs OpenCOR.
                        <div>
                            <strong>Note:</strong> on Windows, if you were to run OpenCOR from a console window by just entering <code>runproj</code>, then the <code>runproj.bat</code> file would be executed (rather than the <code>runproj.vbs</code> file), offering you the opportunity to use OpenCOR as a console application. However, if you were to run OpenCOR by double clicking the <code>runproj.bat</code> file from within Windows Explorer, then a console window will quickly appear and disappear. To avoid this, you should double click on the <code>runproj.vbs</code> file.
                        </div>
                    </li>
                </ul>
            </li>
            <li>
                <strong>Using Qt Creator:</strong>
                <ul>
                    <li>Start Qt Creator;</li>
                    <li>Open <a href="https://github.com/opencor/opencor/blob/master/CMakeLists.txt"><code>[OpenCOR]/CMakeLists.txt</code></a> (by selecting the <code>File</code> | <code>Open File or Project...</code> menu or by pressing <code>Ctrl+O</code>);</li>
                    <li>Specify <a href="https://github.com/opencor/opencor/tree/master/build"><code>[OpenCOR]/build</code></a> as the build directory;</li>
                    <li>Select <code>MinGW</code> as the generator (Windows only), if necessary;</li>
                    <li>Click on the <code>Run CMake</code> button;</li>
                    <li>Click on the <code>Finish</code> button;</li>
                    <li>Select <code>OpenCOR</code> as the run target (by selecting the <code>Build</code> | <code>Open Build/Run Target Seclector...</code> menu or by pressing <code>Ctrl+T</code>), if necessary; and</li>
                    <li>
                        Build and test OpenCOR (by selecting the <code>Build</code> | <code>Run</code> menu or by pressing <code>Ctrl+R</code>).
                        <div>
                            <strong>Note #1:</strong> because of our use of CMake, debugging with Qt Creator requires an extra build step which can be set up by selecting the <code>Projects</code> view and by clicking on the <code>Add Build Step</code> drop-down button and clicking on the <code>Custom Process Step</code> menu item. From there, make sure that the <code>Enable custom process step</code> check box is ticked, set the <code>Command</code> field to <code>cmake</code>, the <code>Working directory</code> field to <code>${BUILDDIR}/build</code> and the <code>Command arguments</code> field to <code>-DCMAKE_BUILD_TYPE=Debug ..</code>. Finally, make sure that this new build step comes before the default <code>Make</code> build step.
                        </div>
                        <div>
                            <strong>Note #2:</strong> by default, Qt Creator will compile OpenCOR sequentially, but this can be changed by selecting the <code>Projects</code> view and by clicking on the <code>Details</code> drop-down button of the default <code>Make</code> build step under the <code>Build Steps</code> header. From there, just set the <code>Additional arguments</code> field to <code>-j [n]</code> where <code>n</code> is the number of jobs to be run simultaneously (if no <code>n</code> value is provided, then Qt Creator will try to run as many jobs as possible simultaneously).
                        </div>
                    </li>
                </ul>
            </li>
        </ul>

        <h2>
            Package
        </h2>

        <p>
            The packaging of OpenCOR can only be done from the command line, using <a href="https://github.com/opencor/opencor/blob/master/packageproj.bat"><code>[OpenCOR]/packageproj.bat</code></a> on Windows and <a href="https://github.com/opencor/opencor/blob/master/packageproj"><code>[OpenCOR]/packageproj</code></a> on Linux / Mac OS X. Note that though the Linux package is originally meant for Ubuntu 11.04 (Natty Narwhal; both 32-bit and 64-bit), it should also work with other versions of Ubuntu, as well as other Linux distributions though additional libraries may be required in this particular case.
        </p>

        <div class="copyright">
            Copyright ©2011
        </div>
    </body>
</html>
